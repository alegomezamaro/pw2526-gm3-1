<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Buscar Familia por ID</title>
</head>
<body>
  <h1>Buscar Familia por ID</h1>

  <!-- Formulario (siempre visible) -->
  <form th:action="@{/findFamiliaById}" method="get" style="margin-bottom:1rem;">
    <label for="id">ID de la familia:</label>
    <input type="number" id="id" name="id" min="1" th:value="${param.id}"/>
    <button type="submit">Buscar</button>
  </form>

  <!-- Mensajes -->
  <div th:if="${errorMessage}" style="color:red;" th:text="${errorMessage}">Error</div>
  <div th:if="${infoMessage}" style="color:green;" th:text="${infoMessage}">Info</div>

  <!-- Resultado si existe -->
  <div th:if="${familia != null}">
    <h2>Datos de la familia</h2>
    <p><strong>ID:</strong> <span th:text="${familia.id}">-</span></p>
    <p><strong>DNI titular principal:</strong> <span th:text="${familia.mainDni}">-</span></p>

    <div th:if="${familia.miembros != null and #lists.size(familia.miembros) > 0}">
      <h3>Miembros</h3>
      <ul>
        <li th:each="m : ${familia.miembros}" th:text="${m}">Miembro</li>
      </ul>
    </div>
  </div>

  <!-- Si no hay familia pero sí se buscó un id -->
  <div th:if="${familia == null and param.id != null}" style="color:#b00;">
    No se encontró ninguna familia con ID&nbsp;<span th:text="${param.id}">ID</span>.
  </div>

  <p style="margin-top:1rem;"><a th:href="@{/}">Volver al menú</a></p>
</body>
</html>
